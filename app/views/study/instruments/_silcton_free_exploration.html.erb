<%= content_for :head  do %>

<script src="/free-exploration/TemplateData/UnityProgress.js"></script>  
<script src="/free-exploration/Build/UnityLoader.js"></script>
<% end%>

<script type="text/javascript">


  var gameInstance
  $( document ).on('turbolinks:load',function(){ gameInstance = UnityLoader.instantiate("gameContainer", "/free-exploration/Build/Silcton_FreeExploration_Website.json", {onProgress: UnityProgress}); })
  function recordPositionLine(positionString) {
    $log = $("#virtual_navigation_log");
    var previousLog = $log.val();
    $log.val(previousLog + "\n" + positionString)
  }
</script>

    <div class="webgl-content">
      <div id="gameContainer" style="width: 1024px; height: 768px"></div>
      <div class="footer">
        <div class="webgl-logo"></div>
        <div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div>
        <div class="title">Virtual Silcton</div>
      </div>
    </div>
<%= form_tag study_instrument_path(:study_id=>@study.id,:instrument_id=>@instrument.order) %>

<input type="hidden" name="virtual_navigation_log[log]" id="virtual_navigation_log" />
<%= submit_tag 'I am Finished', :class => "button" %>
</form>
